<!DOCTYPE html>
<html lang="pt-br">
<head>
  <%- include('../public/include/head.html') -%>
</head>
<body class="bg-page">
  <!-- Seu site -->

  <header class="text-dark">
    <%- include('../public/include/header.html') -%>
  </header>

  <section class="container py-5 mt-5 px-4 list-home-eventos">
    <div class="row justify-content-center">
      <div class="col-md-11">
        <div class="card-columns"></div>
      </div>
    </div>
  </section>

  <section class="modal" id="modalEvento">
    <div class="container">
      <div class="row no-gutters bg-dark text-light">
        <div class="col-md-4">
          <img id="imagem" src="" alt="" class="img-fluid">
        </div>
        <div class="col-md-8 p-3" style="padding-bottom: 78px !important;">
          <h2 id="titulo"></h2>
          <a class="text-light font-ligh font-80"><span class='mdi mdi-map-marker text-warning'></span> <span id="local"></span></a>

          <div id="descricao" class="font-80 mt-3"></div>

          <div class="menu-evento">
            <a href="#" class="btn btn-success btn-facil-comprar border-0 rounded-0 btn-block px-3 disabled">Comprar</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <%- include('../public/include/preFooter.html') -%>

  <footer>
    <%- include('../public/include/footer.html') -%>
  </footer>


  <!-- JavaScript jquery -->
  <script src="./libraries/jquery/jquery-3.1.1.min.js" charset="utf-8"></script>
  <!-- JavaScript popper -->
  <script src="./libraries/bootstrap_v4/js/popper.min.js" charset="utf-8"></script>
  <!-- JavaScript bootstrap -->
  <script src="./libraries/bootstrap_v4/js/bootstrap.min.js" charset="utf-8"></script>

  <script src="/libraries/moments/moment.min.js" charset="utf-8"></script>
  <script src="/libraries/moments/pt-br.js" charset="utf-8"></script>

  <script src="./javascripts/root.js" charset="utf-8"></script>
  <script src="./javascripts/diretivas.js" charset="utf-8"></script>

  <script type="text/javascript">
  var $modal = $("#modalEvento")

  function eventoClick(_link) {
    $.ajax({
      url: hostApi+'/evento/'+_link,
      cache: 'false'
    }).done(function (res) {

      $("#imagem").attr('src', res.imagem)
      $("#titulo").html(res.titulo)
      $("#local").html(res.localidade + " - " + res.cidade)
      $("#local").attr('href', res.mapa)
      $("#descricao").html(res.descricao)

      $modal.modal({show: true})

    }).fail(function (res) {
      console.log("error")

      setTimeout(function () {
        eventoClick(_link)
      }, 1000);
    })
  }

  (function () {
    var $list = ''
    var $boxLista = $(".list-home-eventos .card-columns")
    var control = null
    $('.btn-nav-home').addClass('active')


    $.ajax({
      url: hostApi+'/evento/lista',
      cache: true,
    }).done(function (e) {
      var teste = "";
      (e.dados).forEach(function (elem) {
        // elem.imagem = hostApi+'/image/'+elem.imagem
        teste += dir.cardEvento(elem)
      })
      $boxLista.append(teste)
      $list = $(".card-evento")
    }).fail(function () {
      console.log('Error');
    })

  })()



  // function cardMaisEventos() {
  //   var elem = $('.card-mais-eventos')
  //
  //   elem.hasClass('active') ? elem.removeClass('active') : elem.addClass('active')
  // }
  </script>
</body>
</html>
